(()=>{"use strict";var e={609:e=>{e.exports=window.React},455:e=>{e.exports=window.wp.apiFetch},715:e=>{e.exports=window.wp.blockEditor},997:e=>{e.exports=window.wp.blocks},427:e=>{e.exports=window.wp.components},143:e=>{e.exports=window.wp.data},87:e=>{e.exports=window.wp.element},723:e=>{e.exports=window.wp.i18n}},t={};function r(o){var c=t[o];if(void 0!==c)return c.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,r),a.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var o=r(997),c=r(723),a=r(609),n=r(715),i=r(427),l=r(87),s=r(143),d=r(455),p=r.n(d);const u=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"blaze-commerce/product-description","version":"1.0.0","title":"Product Description","category":"woocommerce-product-elements","icon":"text","description":"Display WooCommerce product description","supports":{"html":false,"align":["left","center","right","wide","full"]},"attributes":{"productId":{"type":"number","default":0}},"keywords":["product","description","woocommerce","blaze"],"render":"file:./product-description-block.php","textdomain":"blaze-commerce","editorScript":"file:./index.js","editorStyle":"file:./editor.css","style":"file:./style.css"}');(0,o.registerBlockType)(u.name,{...u,edit:function({attributes:e,setAttributes:t}){const{productId:r}=e,[o,d]=(0,l.useState)(""),[u,m]=(0,l.useState)(!1),[w,b]=(0,l.useState)([]),f=(0,s.useSelect)((e=>e("core/editor")?.getCurrentPostId()),[]);(0,l.useEffect)((()=>{(async()=>{try{const e=await p()({path:"/wp/v2/product?per_page=100&status=publish"});b(e)}catch(e){console.error("Error loading products:",e);try{const e=await p()({path:"/wc/v3/products?per_page=100&status=publish"});b(e)}catch(e){console.error("Error loading products from WC API:",e)}}})()}),[]),(0,l.useEffect)((()=>{(async()=>{if(r){m(!0);try{const e=await p()({path:`/wp/v2/product/${r}`});d(e.content?.rendered||"")}catch(e){console.error("Error loading product description:",e);try{const e=await p()({path:`/wc/v3/products/${r}`});d(e.description||"")}catch(e){console.error("Error loading product description from WC API:",e),d("")}}finally{m(!1)}}else d("")})()}),[r]),(0,l.useEffect)((()=>{f&&!r&&w.length>0&&w.find((e=>e.id===f))&&t({productId:f})}),[f,r,w,t]);const h=(0,n.useBlockProps)(),y=[{label:(0,c.__)("Select a product","blaze-commerce"),value:0},...w.map((e=>({label:e.name||e.title?.rendered,value:e.id})))];return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(n.InspectorControls,null,(0,a.createElement)(i.PanelBody,{title:(0,c.__)("Product Selection","blaze-commerce"),initialOpen:!0},(0,a.createElement)(i.SelectControl,{label:(0,c.__)("Select Product","blaze-commerce"),value:r,options:y,onChange:e=>t({productId:parseInt(e)}),help:(0,c.__)("Choose which product description to display","blaze-commerce")}))),(0,a.createElement)("div",{...h},r?u?(0,a.createElement)(i.Placeholder,{icon:"text",label:(0,c.__)("Product Description","blaze-commerce")},(0,a.createElement)(i.Spinner,null)):(0,a.createElement)("div",{className:"blaze-product-description"},o?(0,a.createElement)("div",{dangerouslySetInnerHTML:{__html:o}}):(0,a.createElement)("p",{style:{color:"#999",fontStyle:"italic"}},(0,c.__)("No description available for this product.","blaze-commerce"))):(0,a.createElement)(i.Placeholder,{icon:"text",label:(0,c.__)("Product Description","blaze-commerce"),instructions:(0,c.__)("Select a product from the sidebar to display its description.","blaze-commerce")})))},save:function({attributes:e}){const{productId:t}=e,r=n.useBlockProps.save({className:"blaze-product-description-block","data-product-id":t});return(0,a.createElement)("div",{...r},(0,a.createElement)("div",{className:"blaze-product-description","data-product-id":t}))}})})();